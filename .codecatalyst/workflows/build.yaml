Name: JavaJUnitNoMaven
SchemaVersion: "1.0"

Triggers:
  - Type: PUSH
    Branches:
      - main

Actions:
  BuildAndTest:
    Identifier: aws/build@v1
    Inputs:
      Sources:
        - WorkflowSource
    Compute:
      Type: EC2
    Configuration:
      Steps:
        - Run: |
            bash -c " \
              echo 'ğŸ”§ Step 1: Installing Java'; \
              sudo yum update -y; \
              sudo yum install -y java-17-openjdk-devel git wget unzip; \
              echo 'ğŸ“ Step 2: Navigating to workspace'; \
              cd \$AWS_WORKSPACE_PATH; \
              echo 'ğŸ•’ Waiting for source files...'; \
              sleep 2; \
              echo 'ğŸ“¦ Files in workspace:'; \
              find . -type f; \
              echo 'ğŸ› ï¸ Compiling Java'; \
              javac -cp 'lib/*' TodoList.java todolist17Test.java || { echo 'âŒ Compilation failed'; exit 1; }; \
              echo 'ğŸš€ Running tests'; \
              java -jar lib/junit-platform-console-standalone-1.10.0.jar -cp . --scan-classpath || { echo 'âŒ Tests failed'; exit 1; }; \
              echo 'âœ… Done!'; \
            "
